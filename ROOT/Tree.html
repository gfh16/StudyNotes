<!DOCTYPE html><html><head>
      <title>Tree</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/sea/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.5.12/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <ul>
<li><a href="#font-color00bfff-24-trees-%E6%A0%91-font"> 2.4 Trees &#x6811;  </a>
<ul>
<li><a href="#font-colorff00ff-241-%E4%BB%80%E4%B9%88%E6%98%AF-tree-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-tree-font">  2.4.1 &#x4EC0;&#x4E48;&#x662F; Tree ? &#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528; Tree ? </a></li>
<li><a href="#font-colorff00ff-242-%E6%9F%A5%E7%9C%8B-tree-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF-font">  2.4.2 &#x67E5;&#x770B; Tree &#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F; </a></li>
<li><a href="#font-colorff00ff-243-tree-branch-%E7%9A%84%E5%AD%98%E5%82%A8%E5%AF%B9%E8%B1%A1-font">  2.4.3 Tree Branch &#x7684;&#x5B58;&#x50A8;&#x5BF9;&#x8C61; </a></li>
<li><a href="#font-colorff00ff-244-splittng-a-branch-font">  2.4.4 Splittng a Branch </a></li>
<li><a href="#font-colorff00ff-245-tree-%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8Ffont">  2.4.5 Tree &#x7684;&#x591A;&#x79CD;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;</a></li>
<li><a href="#font-colorff00ff-246-tree-%E7%9A%84%E8%AF%BB%E5%8F%96font">  2.4.6 Tree &#x7684;&#x8BFB;&#x53D6;</a></li>
<li><a href="#font-colorff00ff-247-tchain-font">  2.4.7 TChain </a></li>
<li><a href="#font-colorff00ff-248-data-analysis-treedraw-font">  2.4.8 Data Analysis - Tree::Draw </a></li>
<li><a href="#font-colorff00ff-249-data-analysis-treemakeclass-font">  2.4.9 Data Analysis - Tree::MakeClass </a></li>
<li><a href="#font-colorff00ff-2410-data-analysis-ttreemakeselector-font">  2.4.10 Data Analysis - TTree::MakeSelector </a></li>
<li><a href="#font-colorff00ff-2411-tree-%E7%9A%84%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE-font">  2.4.11 Tree &#x7684;&#x5176;&#x4ED6;&#x8BBE;&#x7F6E; </a></li>
</ul>
</li>
</ul>
<p>&#x2003;</p>
<h3 class="mume-header" id="font-color00bfff-24-trees-%E6%A0%91-font"><font color="#00BFFF"> 2.4 Trees &#x6811;  </font></h3>

<h4 class="mume-header" id="font-colorff00ff-241-%E4%BB%80%E4%B9%88%E6%98%AF-tree-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-tree-font"><font color="#FF00FF">  2.4.1 &#x4EC0;&#x4E48;&#x662F; Tree ? &#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528; Tree ? </font></h4>

<ul>
<li>
<p><strong>ROOT &#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;</strong></p>
<blockquote>
<ul>
<li>&#x5F53;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x5927;&#x91CF;&#x7C7B;&#x578B;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x65F6;, ROOT &#x63D0;&#x4F9B;&#x4E86; <strong>TTree</strong> &#x4E0E; <strong>TNtuple</strong> &#x4E24;&#x79CD;&#x65B9;&#x5F0F;.</li>
<li>TTree &#x65B9;&#x5F0F;&#x7684;&#x7279;&#x70B9;&#x662F;: 1)&#x5360;&#x636E;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5C0F;, 2)&#x8BFB;&#x53D6;&#x901F;&#x5EA6;&#x5FEB;, 3)&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x6240;&#x6709;&#x6570;&#x636E;&#x7C7B;&#x578B;.</li>
<li>TNtuple &#x65B9;&#x5F0F;&#x7684;&#x7279;&#x70B9;: TNtuple &#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684; TTree, &#x5B83;&#x4EC5;&#x652F;&#x6301;&#x6D6E;&#x70B9;&#x578B;&#x6570;&#x636E;.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Tree &#x7684;&#x7279;&#x70B9;</strong></p>
<blockquote>
<ul>
<li>TTree &#x7684;&#x8981;&#x7D20;: branches, buffers, leafs.</li>
<li>When using a TTree, we fill its branch buffers with leaf data and the buffers are written to disk when it is full.</li>
<li>Each object is not written individually, but rather collected and written a bunch at a time.</li>
<li>TTree will produce a much smaller file than if the objects were written individually, since it contains many same-class objects, and the header of the objects can be compressed.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>TTree &#x7279;&#x70B9;&#x89E3;&#x6790;</strong></p>
<blockquote>
<ul>
<li><font color="#DC143C">  Compression. &#x5360;&#x636E;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5C0F;.</font> TTree redues the header of each object. However, the compression can be turned off. If so, we will not see these large savings.</li>
<li><font color="#DC143C">  Optimize the data access. &#x8BFB;&#x53D6;&#x901F;&#x5EA6;&#x5FEB;.</font> Tree &#x4F7F;&#x7528;&#x5206;&#x5C42;&#x7684; Branch &#x7ED3;&#x6784;&#x5B58;&#x50A8;&#x6570;&#x636E;, &#x6BCF;&#x4E2A; Branch &#x53EF;&#x4EE5;&#x4E0E;&#x5176;&#x4ED6;&#x5206;&#x5F00;&#x5355;&#x72EC;&#x8BFB;&#x53D6;.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>TTree &#x7279;&#x70B9;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</strong></p>
<blockquote>
<ul>
<li>&#x8003;&#x8651; 100&#x4E07;&#x4E2A;&#x4E8B;&#x4EF6;. &#x6BCF;&#x4E2A;&#x4E8B;&#x4EF6; event &#x4E2D;, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">P_X, P_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> &#x662F;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x6210;&#x5458;. &#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x4E8B;&#x4EF6;, &#x73B0;&#x5728;&#x9700;&#x8981;&#x8BA1;&#x7B97; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mi>X</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>P</mi><mi>Y</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">P_X^2 + P_Y^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.089439em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.424669em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.089439em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.424669em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span></span></span></span>, &#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x586B;&#x5145;&#x4E3A;&#x76F4;&#x65B9;&#x56FE;.</li>
<li>&#x5982;&#x679C;&#x6CA1;&#x6709; TTree, &#x6211;&#x4EEC;&#x5C06;&#x9700;&#x8981;&#x8FD9;&#x6837;&#x505A;:<br>
(1) &#x8BFB;&#x53D6;&#x6BCF;&#x4E2A;&#x5B8C;&#x6574;&#x7684; event<br>
(2) &#x4ECE;&#x6BCF;&#x4E2A; event &#x4E2D;&#x63D0;&#x53D6; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">P_X, P_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>
(3) &#x8BA1;&#x7B97; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mi>X</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>P</mi><mi>Y</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">P_X^2 + P_Y^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.089439em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.424669em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.089439em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.424669em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span></span></span></span><br>
(4) &#x586B;&#x5145;&#x76F4;&#x65B9;&#x56FE;<br>
&#x8FD9;&#x6837;&#x7684;&#x6574;&#x5957;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x8FDB;&#x884C; 100 &#x4E07;&#x6B21;&#xFF01;</li>
<li>&#x4EE5;&#x4E0A;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x6240;&#x4EE5;&#x5F88;&#x8017;&#x65F6;, &#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x90FD;&#x8981;&#x8BFB;&#x53D6;&#x5B8C;&#x6574;&#x7684;&#x4E8B;&#x4EF6;! &#x4F46;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x6CA1;&#x6709;&#x5FC5;&#x8981;, &#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5176;&#x4E2D;&#x7684; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">P_X, P_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
<li>TTree &#x7684;&#x9B45;&#x529B;&#x6240;&#x5728;, &#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x5229;&#x7528;&#x5206;&#x652F;(Branch)&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;:<br>
(1) &#x4F7F;&#x7528; TTree, &#x5C06; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">P_X, P_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> &#x5B58;&#x6210;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684; Branch.<br>
(2) &#x6BCF;&#x4E2A;&#x4E8B;&#x4EF6;, &#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8BFB;&#x53D6; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">P_X, P_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> &#x8FD9;&#x4E24;&#x4E2A; Branch &#x5373;&#x53EF;.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Tree &#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;</strong><br>
<img src="ROOT/pictures/030000F8.png" alt="The TTree class"></p>
</li>
</ul>
<p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-242-%E6%9F%A5%E7%9C%8B-tree-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF-font"><font color="#FF00FF">  2.4.2 &#x67E5;&#x770B; Tree &#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F; </font></h4>

<ul>
<li><strong>TTree::Show</strong><br>
&#x7528;&#x4E8E;&#x663E;&#x793A;&#x7B2C; num &#x4E2A;&#x4E8B;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;.</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x4F8B;&#x5982;, &#x663E;&#x793A; staff.root &#x4E2D;&#x7684;&#x7B2C; 10 &#x4E2A;&#x4E8B;&#x4EF6;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;staff.root&quot;</span><span class="token punctuation">)</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> f<span class="token punctuation">.</span><span class="token function">ls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// &#x67E5;&#x770B; Tree name</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> EVENT<span class="token operator">:</span><span class="token number">10</span>
 Category        <span class="token operator">=</span> <span class="token number">361</span>
 Flag            <span class="token operator">=</span> <span class="token number">15</span>
 Age             <span class="token operator">=</span> <span class="token number">51</span>
 Service         <span class="token operator">=</span> <span class="token number">29</span>
 Children        <span class="token operator">=</span> <span class="token number">0</span>
 Grade           <span class="token operator">=</span> <span class="token number">7</span>
 Step            <span class="token operator">=</span> <span class="token number">13</span>
 Hrweek          <span class="token operator">=</span> <span class="token number">40</span>
 Cost            <span class="token operator">=</span> <span class="token number">7599</span>
 Division        <span class="token operator">=</span> PS
 Nation          <span class="token operator">=</span> FR
</pre><ul>
<li><strong>TTree::Print</strong><br>
&#x5F88;&#x6709;&#x7528;&#xFF01;&#x7528;&#x4E8E;&#x663E;&#x793A; tree &#x7684;&#x7ED3;&#x6784;, &#x5305;&#x62EC;&#x4E8B;&#x4EF6;&#x7684;&#x6210;&#x5458;, branch, leaves, &#x548C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7B49;.</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x4E3E;&#x4F8B;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
<span class="token operator">*</span>Tree    <span class="token operator">:</span>T         <span class="token operator">:</span> staff data from ascii file                     <span class="token operator">*</span>
<span class="token operator">*</span>Entries <span class="token operator">:</span><span class="token number">3354</span>      <span class="token operator">:</span> Total <span class="token operator">=</span> <span class="token number">245417</span> bytes  File  Size <span class="token operator">=</span>        <span class="token number">59945</span><span class="token operator">*</span>
<span class="token operator">*</span>                     Tree compression factor <span class="token operator">=</span>   <span class="token number">2.90</span>               <span class="token operator">*</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
<span class="token operator">*</span>Br    <span class="token number">0</span> <span class="token operator">:</span>staff     <span class="token operator">:</span>Category<span class="token operator">/</span>I<span class="token operator">:</span>Flag<span class="token operator">:</span>Age<span class="token operator">:</span>Service<span class="token operator">:</span>Children<span class="token operator">:</span>Grade<span class="token operator">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token operator">*</span>
<span class="token operator">*</span>         <span class="token operator">|</span> Cost                                                     <span class="token operator">*</span>
<span class="token operator">*</span>Entries <span class="token operator">:</span><span class="token number">3354</span> <span class="token operator">:</span> Total Size  <span class="token operator">=</span> <span class="token number">154237</span> bytes  File Size <span class="token operator">=</span> <span class="token number">32316</span>       <span class="token operator">*</span>
<span class="token operator">*</span>Baskets <span class="token operator">:</span>   <span class="token number">3</span> <span class="token operator">:</span> Basket Size <span class="token operator">=</span>  <span class="token number">32000</span> bytes  Compression<span class="token operator">=</span> <span class="token number">2.97</span>       <span class="token operator">*</span>
</pre><ul>
<li><strong>TTree::Scan</strong><br>
&#x7528;&#x4E8E;&#x663E;&#x793A;&#x9009;&#x5B9A;&#x7684; leaves</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">//_______________________________________________________________</span>
<span class="token comment">// root[] tree-&gt;Scan() // print the first 8 variables of the tree </span>
<span class="token comment">// </span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age:Children&quot;</span><span class="token punctuation">)</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
<span class="token operator">*</span>    Row   <span class="token operator">*</span>      Cost <span class="token operator">*</span>       Age <span class="token operator">*</span>  Children <span class="token operator">*</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">0</span> <span class="token operator">*</span>     <span class="token number">11975</span> <span class="token operator">*</span>        <span class="token number">58</span> <span class="token operator">*</span>         <span class="token number">0</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">1</span> <span class="token operator">*</span>     <span class="token number">10228</span> <span class="token operator">*</span>        <span class="token number">63</span> <span class="token operator">*</span>         <span class="token number">0</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">2</span> <span class="token operator">*</span>     <span class="token number">10730</span> <span class="token operator">*</span>        <span class="token number">56</span> <span class="token operator">*</span>         <span class="token number">2</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">3</span> <span class="token operator">*</span>      <span class="token number">9311</span> <span class="token operator">*</span>        <span class="token number">61</span> <span class="token operator">*</span>         <span class="token number">0</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">4</span> <span class="token operator">*</span>      <span class="token number">9966</span> <span class="token operator">*</span>        <span class="token number">52</span> <span class="token operator">*</span>         <span class="token number">2</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">5</span> <span class="token operator">*</span>      <span class="token number">7599</span> <span class="token operator">*</span>        <span class="token number">60</span> <span class="token operator">*</span>         <span class="token number">0</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">6</span> <span class="token operator">*</span>      <span class="token number">9868</span> <span class="token operator">*</span>        <span class="token number">53</span> <span class="token operator">*</span>         <span class="token number">1</span> <span class="token operator">*</span>
<span class="token operator">*</span>        <span class="token number">7</span> <span class="token operator">*</span>      <span class="token number">8012</span> <span class="token operator">*</span>        <span class="token number">60</span> <span class="token operator">*</span>         <span class="token number">1</span> <span class="token operator">*</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">//__________________________________________________</span>
<span class="token comment">// root[] tree-&gt;Scan(&quot;var1:var2&quot;,&quot;selection&quot;)</span>
tree<span class="token operator">-&gt;</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token string">&quot;var1:var2:var3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;var1 == 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>Tree Viewer</strong><br>
tree viewer &#x662F;&#x4E2A;&#x5FEB;&#x901F;&#x67E5;&#x770B; tree &#x7684;&#x65B9;&#x6CD5;</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x65B9;&#x5F0F;1: &#x5148;&#x6253;&#x5F00;&#x4E00;&#x4E2A; .root &#x6587;&#x4EF6;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;staff.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">StartViewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// &#x65B9;&#x5F0F;2: &#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x7A7A;&#x7684; tree viewer</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> gSystem<span class="token operator">-&gt;</span><span class="token function">Load</span><span class="token punctuation">(</span>&quot;libTreeViewer<span class="token punctuation">.</span>so<span class="token punctuation">)</span><span class="token punctuation">;</span> 
root<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">new</span> <span class="token function">TTreeViewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-243-tree-branch-%E7%9A%84%E5%AD%98%E5%82%A8%E5%AF%B9%E8%B1%A1-font"><font color="#FF00FF">  2.4.3 Tree Branch &#x7684;&#x5B58;&#x50A8;&#x5BF9;&#x8C61; </font></h4>

<blockquote>
<ul>
<li>The organization of branches allows the designer to optimize the data for anticipated use.</li>
<li>Branch &#x7684;&#x8BBE;&#x7F6E;&#x539F;&#x5219;:<br>
(1) &#x5F53;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#xFF0C;&#x4E14;&#x4E0D;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;, &#x5E94;&#x8BE5;&#x5C06;&#x4ED6;&#x4EEC;&#x653E;&#x5728;&#x4E0D;&#x540C;&#x7684; Branch.<br>
(2) &#x5F53;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x76F8;&#x4E92;&#x5173;&#x8054;, &#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x70B9;&#x7684;&#x4E24;&#x4E2A;&#x5750;&#x6807;, &#x6700;&#x9AD8;&#x6548;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x5C06;&#x5B83;&#x4EEC;&#x653E;&#x5728;&#x540C;&#x4E00;&#x4E2A; Branch.</li>
<li>TBranch &#x7684;&#x53D8;&#x91CF;&#x79F0;&#x4E3A; &quot;leaf&quot;</li>
<li>&#x540C;&#x4E00;&#x4E2A; TTree &#x7684;&#x4E0D;&#x540C; Branch, &#x53EF;&#x4EE5;&#x5199;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x4E2D;</li>
<li>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; Branch&#xFF0C; &#x901A;&#x5E38;&#x4F7F;&#x7528; TTree::Branch() &#x65B9;&#x6CD5;. &#x4E00;&#x822C;&#x4E0D;&#x4F7F;&#x7528; TBranch &#x6765;&#x6784;&#x9020;.</li>
<li>Branch &#x7684;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x662F;:<br>
(1) A list of simple variables<br>
(2) An entire object<br>
(3) An array of objects<br>
(4) Contents of a folder<br>
(5) Contents of a TList</li>
</ul>
</blockquote>
<ul>
<li><strong>Adding a Branch to Hold a List of Variables</strong></li>
</ul>
<blockquote>
<ul>
<li>&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7B26;&#x53F7;&#x8868;&#x793A;:<br>
C : a character string terminated by the 0 character<br>
B : an 8 bit signed integer<br>
b : an 8 bit unsigned integer<br>
S : a 16 bit signed integer<br>
s : a 16 bit unsigned integer<br>
I : a 32 bit signed integer<br>
i : a 32 bit unsigned integer<br>
L : a 64 bit signed integer<br>
l : a 64 bit unsigned integer<br>
F : a 32 bit floating point<br>
D : a 64 bit floating point<br>
O : [the letter &apos;O&apos;, not a zero] a boolean (Bool_t)</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// 1.&#x4F7F;&#x7528;&#x7ED3;&#x6784;&#x4F53;, &#x5305;&#x542B;&#x591A;&#x4E2A;&#x53D8;&#x91CF;</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;Ev_Branch&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>event<span class="token punctuation">,</span><span class="token string">&quot;temp/F:ntrack/I:nseg:nvtex:flag/i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">/*
// *&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F; branch name 
// *&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F; branch &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x5730;&#x5740;. &#x8FD9;&#x91CC; event &#x662F;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;
// *&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x662F; leaf &#x5217;&#x8868;, &#x6BCF;&#x4E2A; leaf &#x683C;&#x5F0F;&#x4E3A;: leaf &#x540D;&#x5B57;/&#x7C7B;&#x578B;, &#x4E24;&#x4E2A; leaf &#x7531;&#x5192;&#x53F7; &quot;:&quot; &#x9694;&#x5F00;.

&#x8BF4;&#x660E;1: To avoid alignment problems, we need to use structures 
      with same length member.
&#x8BF4;&#x660E;2: If the structure does not qualify, we need to create
      one branch for each of the structire.
&#x8BF4;&#x660E;3: The leaf name is not used to pick the variable out of the 
      structure, but is only used as the name for the leaf.
&#x8BF4;&#x660E;4: structure &#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x8981;&#x4E0E; leaf &#x88C2;&#x53D8;&#x4E2D;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;.
&#x8BF4;&#x660E;5: The type can be omitted if no type is given, the same 
      type as the previous variable is assumed.
&#x8BF4;&#x660E;6: When no type is given for the very first leaf, it becomes
      a float (F).
*/</span>


<span class="token comment">// 2.&#x4F7F;&#x7528;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4; </span>
Float_t f<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;fBranch&quot;</span><span class="token punctuation">,</span>f<span class="token punctuation">,</span> <span class="token string">&quot;f[10]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 3.&#x4F7F;&#x7528;&#x53D8;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;</span>
<span class="token punctuation">{</span>
  Int_t nPhot<span class="token punctuation">;</span>
  Float_t E<span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  TTree<span class="token operator">*</span> nEmcPhotos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;nEmcPhotons&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;EMC Photons&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nEmcPhotos<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;nPhot&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>nPhot<span class="token punctuation">,</span> <span class="token string">&quot;nPhot/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nEmcPhotos<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span> E<span class="token punctuation">,</span> <span class="token string">&quot;E[nPhot]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li><strong>Adding a TBranch to Hold an Object</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// To add a branch to hold an object</span>
TTree<span class="token operator">*</span> tree  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;A Root Tree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token type-opencl-host-c++ keyword">Event</span><span class="token operator">*</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token type-opencl-host-c++ keyword">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;EventBranch&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Event&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>event<span class="token punctuation">,</span><span class="token number">32000</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
// &quot;EventBranch&quot; : branch name
// &quot;Event&quot; : the name of the class of the object to be stored
// &amp;event  : the address of a pointer to the object to be stored
             (&#x8FD9;&#x662F;&#x6307;&#x9488;&#x7684;&#x5730;&#x5740;, &#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6307;&#x9488;, &#x56E0;&#x6B64;&#x9700;&#x8981;&#x52A0; &quot;&amp;&quot;)
// 32000 : buffer size, by default 32000 bytes. (&#x8BE6;&#x89C1;2.4.4)
// 99 : split-level (&#x8BE6;&#x89C1;2.4.4)
*/</span>
</pre><ul>
<li><strong>Adding a Branch to Hold a TCloneArray</strong></li>
</ul>
<blockquote>
<ul>
<li>ROOT has two classes to manage arrays of objects.</li>
<li>TObjArray : manage objects of different classes</li>
<li>TClonesArray : manage objects of the same class</li>
</ul>
</blockquote>
<ul>
<li><strong>Adding a Branch with a Folder</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// To add a branch from a folder</span>
<span class="token comment">// This method creates one branch for each element in the folder.</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;/aFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 1. An alternative way to create a tree and organize it is to use folders.</span>
<span class="token comment">// 2. You can build a folder structure and create a tree with branches for </span>
<span class="token comment">//    each of the sub-folders</span>
<span class="token comment">// 3. The second argument &quot;/MyFolder&quot; is the top folder, and the &quot;/&quot; signals the </span>
<span class="token comment">//    TTree constructor that this is a folder not just the title&#x3002;</span>

TTree <span class="token function">folder_tree</span><span class="token punctuation">(</span><span class="token string">&quot;MyFolderTree&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/MyFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>Adding a Branch with a  Collection</strong></li>
</ul>
<blockquote>
<ul>
<li>&#x7565;</li>
</ul>
</blockquote>
<ul>
<li><strong>Identical Branch Names</strong></li>
</ul>
<blockquote>
<ul>
<li>When a top-level object has two data members of the same class,<br>
the sub branches end up with identical names.</li>
<li>To distinguish the sub branch, we must associate them with the master branch<br>
by including a &quot;.&quot; (a dot) at the end of the master. This will force the name of sub branch to be master.sub branch instead of simply sub branch.</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// To identify uniquely the sub branches we add the dot</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;Trigger&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trigger&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>b1<span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;MuonTrigger&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trigger&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>b2<span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// if Trigger has three members T1, T2, T3</span>
<span class="token comment">// the sub branch above:</span>
<span class="token comment">// Trigger.T1, Trigger.T2, Trigger.T3</span>
<span class="token comment">// MuonTrigger.T1, MuonTrigger.T2, MuonTrigger.T3</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-244-splittng-a-branch-font"><font color="#FF00FF">  2.4.4 Splittng a Branch </font></h4>

<blockquote>
<ul>
<li>To split a branch means to create a sub-branch for each data member in the object</li>
<li>split-level = 0 - 99, indicating the depth of splitting</li>
<li>split-level = 0, to disable splitting, means the whole object is written to one branch</li>
<li>split-level = 1, an object data member is assigned a branch</li>
<li>split-level = 2, the data member objects will be split also</li>
<li>slpit-level = 3, ..., etc.</li>
<li>As the split-level increases so does the splitting depth.</li>
<li>The ROOT default split-level is 99, means the object will be split to the maximum.</li>
</ul>
</blockquote>
<ul>
<li>
<p><strong>Splitting a Branch &#x65F6;&#x7684;&#x5185;&#x5B58;&#x8003;&#x8651;</strong></p>
<blockquote>
<ul>
<li>S.plitting a branch can quickly generate many branches, each branch has its own buffer in memory</li>
<li>&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684; Branch &#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF1A;<br>
(1) &#x5C0F;&#x4E8E; 50 &#x4E2A; branches : &#x63A8;&#x8350;&#x5185;&#x5B58;&#x5927;&#x5C0F; 32000 (bytes)<br>
(2) &#x5C0F;&#x4E8E; 100 &#x4E2A; branches: &#x63A8;&#x8350;&#x5185;&#x5B58;&#x5927;&#x5C0F; 16000 (bytes)<br>
(3) &#x5927;&#x4E8E; 500 &#x4E2A; branches: &#x63A8;&#x8350;&#x5185;&#x5B58;&#x5927;&#x5C0F; 4000  (bytes)<br>
&#x4EE5;&#x4E0A;&#x63A8;&#x8350;&#x503C;&#x9002;&#x7528;&#x4E8E;&#x7535;&#x8111;&#x5185;&#x5B58;&#x4E3A; 32MB - 256MeV. &#x5982;&#x679C;&#x7535;&#x8111;&#x5185;&#x5B58;&#x8F83;&#x5927;, &#x53EF;&#x4EE5;&#x7ED9; branch &#x5206;&#x914D;&#x66F4;&#x5927;&#x7684;&#x5185;&#x5B58;. &#x4F46;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#x517C;&#x5BB9;&#x6027;.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Splitting a Branch &#x65F6;&#x7684;&#x6027;&#x80FD;&#x8003;&#x8651;</strong></p>
<blockquote>
<ul>
<li>A split branch is faster to read, but slightly slower to write.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Splitting &#x7684;&#x89C4;&#x5219;</strong></p>
<blockquote>
<ul>
<li>If a data member is a basic type, it becomes one branch of class TBranchElement</li>
<li>A data member can be an array of basic types. In this case,<br>
one single branch is created for the array</li>
<li>A data member can be a pointer to an array of basic types. The length can vary,<br>
and must be specified in the comment field of the data member in the class definition.</li>
<li>Pointer data member are not split, except for pointers to a TCloneArray.</li>
<li>If a data member is an object, the data member of this object are split into branches according to the split-level.</li>
<li>C-structure data members are not supported in split mode.</li>
</ul>
</blockquote>
</li>
</ul>
<p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-245-tree-%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8Ffont"><font color="#FF00FF">  2.4.5 Tree &#x7684;&#x591A;&#x79CD;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;</font></h4>

<blockquote>
<ul>
<li>Tree &#x7684;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;:<br>
(1) &#x521B;&#x5EFA; .root &#x6587;&#x4EF6;<br>
(2) &#x521B;&#x5EFA; TTree<br>
(3) &#x5B9A;&#x4E49;&#x53D8;&#x91CF; (&#x5E76;&#x521D;&#x59CB;&#x5316;,&#x63A8;&#x8350;&#xFF01;)<br>
(4) &#x6DFB;&#x52A0; Branch<br>
(5) TTree &#x586B;&#x5145;<br>
(6) TTree &#x5199;&#x5165;</li>
<li>&#x6839;&#x636E; Branch &#x7684;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;&#x4E0D;&#x540C;, Tree &#x53EF;&#x4EE5;&#x6709;&#x591A;&#x79CD;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;.</li>
</ul>
</blockquote>
<ul>
<li><strong>&#x521B;&#x5EFA;&#x6700;&#x57FA;&#x672C;&#x7684; Tree</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/tutorials/tree/tree1.C</span>
<span class="token comment">//________________________________________</span>
<span class="token keyword">void</span> <span class="token function">tree1w</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  TFile <span class="token function">f</span> <span class="token punctuation">(</span><span class="token string">&quot;tree1.root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;RECREATE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// step1. &#x521B;&#x5EFA; .root &#x6587;&#x4EF6;</span>
  TTree <span class="token function">t1</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a simple Tree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// step2. &#x521B;&#x5EFA; Tree</span>

  Float_t      px <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">;</span>                <span class="token comment">// step3. &#x5B9A;&#x4E49;&#x53D8;&#x91CF;</span>
  Float_t      py <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">;</span>
  Float_t      pz <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">;</span>                 
  Double_t random <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">;</span>
  Int_t        ev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  t1<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>px<span class="token punctuation">,</span> <span class="token string">&quot;px/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// step4. &#x6DFB;&#x52A0; Branch</span>
  t1<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;py&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>py<span class="token punctuation">,</span> <span class="token string">&quot;py/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t1<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;pz&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>pz<span class="token punctuation">,</span> <span class="token string">&quot;pz/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t1<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;ev&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ev<span class="token punctuation">,</span> <span class="token string">&quot;ev/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    gRandom<span class="token operator">-&gt;</span><span class="token function">Rannor</span><span class="token punctuation">(</span>px<span class="token punctuation">,</span>py<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pz <span class="token operator">=</span> px<span class="token operator">*</span>px <span class="token operator">+</span> py<span class="token operator">*</span>py<span class="token punctuation">;</span>
    random <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Rndm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ev <span class="token operator">=</span> i<span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment">// step5. Tree &#x586B;&#x5145;</span>
  <span class="token punctuation">}</span>
  t1<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                          <span class="token comment">// step6. Tree &#x5199;&#x5165;</span>
<span class="token punctuation">}</span>

</pre><ul>
<li><strong>A Tree with a C Structure</strong></li>
</ul>
<blockquote>
<ul>
<li>How to build branches from a C structure</li>
<li>How to make a branch with a fixed length array</li>
<li>How to make a branch with a variable length array</li>
<li>How to read selective branches</li>
<li>How to fill a histogram from a branch</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x53C2;&#x8003;&#x811A;&#x672C;: $ROOTSYS/tutorials/tree/staff.C</span>
<span class="token comment">//_________________________________________</span>
<span class="token punctuation">{</span>
  <span class="token keyword">struct</span> staff_t 
  <span class="token punctuation">{</span>
    Int_t cat<span class="token punctuation">;</span>
    Int_t division<span class="token punctuation">;</span>
    Int_t flag<span class="token punctuation">;</span>
    Int_t age<span class="token punctuation">;</span>
    Int_t service<span class="token punctuation">;</span>
    Int_t children<span class="token punctuation">;</span>
    Int_t grade<span class="token punctuation">;</span>
    Int_t step<span class="token punctuation">;</span>
    Int_t nation<span class="token punctuation">;</span>
    Int_t hrweek<span class="token punctuation">;</span>
    Int_t cost<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
   staff_t staff<span class="token punctuation">;</span>
   TFile <span class="token operator">*</span>f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;staff.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;RECREATE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;staff data from ascii file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   tree<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;staff&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>staff<span class="token punctuation">.</span>cat<span class="token punctuation">,</span>&quot;cat<span class="token operator">/</span>I<span class="token operator">:</span>division<span class="token operator">:</span>flag<span class="token operator">:</span>age<span class="token operator">:</span>service<span class="token operator">:</span>children<span class="token operator">:</span>grade<span class="token operator">:</span>step<span class="token operator">:</span>
                 nation<span class="token operator">:</span>hrweek<span class="token operator">:</span>cost&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// staff : branch name</span>
   <span class="token comment">// &amp;staff.cat(&#x6216;&#x8005; &amp;staff): the address from which the first leaf to be read.</span>
   <span class="token comment">//     here it is the address of the structure staff.</span>
   <span class="token comment">// &#x7B2C;&#x4E09;&#x7EC4;&#x53C2;&#x6570;: leaf &#x7684;&#x540D;&#x5B57;/&#x6570;&#x636E;&#x7C7B;&#x578B;. &#x524D;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7C7B;&#x578B;, &#x4E00;&#x76F4;&#x751F;&#x6548;, &#x76F4;&#x5230;</span>
   <span class="token comment">//     &#x9047;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x624D;&#x505C;&#x6B62;</span>
<span class="token punctuation">}</span>


<span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/tutorials/tree/tree2.C</span>
<span class="token comment">//__________________________________________</span>
<span class="token keyword">const</span> Int_t MAXMEC <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
   Float_t  vect<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t  getot<span class="token punctuation">;</span>
   Float_t  gekin<span class="token punctuation">;</span>
   Float_t  vout<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   Int_t    nmec<span class="token punctuation">;</span>
   Int_t    lmec<span class="token punctuation">[</span>MAXMEC<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Int_t    namec<span class="token punctuation">[</span>MAXMEC<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Int_t    nstep<span class="token punctuation">;</span>
   Int_t    pid<span class="token punctuation">;</span>
   Float_t  destep<span class="token punctuation">;</span>
   Float_t  destel<span class="token punctuation">;</span>
   Float_t  safety<span class="token punctuation">;</span>
   Float_t  sleng<span class="token punctuation">;</span>
   Float_t  step<span class="token punctuation">;</span>
   Float_t  snext<span class="token punctuation">;</span>
   Float_t  sfield<span class="token punctuation">;</span>
   Float_t  tofg<span class="token punctuation">;</span>
   Float_t  gekrat<span class="token punctuation">;</span>
   Float_t  upwght<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Gctrak_t<span class="token punctuation">;</span>


<span class="token comment">//__________________</span>
<span class="token keyword">void</span> <span class="token function">tree2w</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// write tree2 example</span>
   <span class="token comment">//create a Tree file tree2.root</span>
   TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;tree2.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;recreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//create the file, the Tree</span>
   TTree <span class="token function">t2</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a Tree with data from a fake Geant3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// declare a variable of the C structure type</span>
   Gctrak_t gstep<span class="token punctuation">;</span>

   <span class="token comment">// add the branches for a subset of gstep</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;vect&quot;</span><span class="token punctuation">,</span>gstep<span class="token punctuation">.</span>vect<span class="token punctuation">,</span><span class="token string">&quot;vect[7]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;getot&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>getot<span class="token punctuation">,</span><span class="token string">&quot;getot/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;gekin&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>gekin<span class="token punctuation">,</span><span class="token string">&quot;gekin/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;nmec&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>nmec<span class="token punctuation">,</span><span class="token string">&quot;nmec/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;lmec&quot;</span><span class="token punctuation">,</span>gstep<span class="token punctuation">.</span>lmec<span class="token punctuation">,</span><span class="token string">&quot;lmec[nmec]/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;destep&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>destep<span class="token punctuation">,</span><span class="token string">&quot;destep/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;pid&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>pid<span class="token punctuation">,</span><span class="token string">&quot;pid/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">//_________________________</span>
<span class="token comment">// Branch &#x4E3A;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;</span>
<span class="token comment">// gstep.vect &#x4E0D;&#x9700;&#x8981;&#x52A0; &#x201C;&amp;&#x201D;</span>
 t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;vect&quot;</span><span class="token punctuation">,</span>gstep<span class="token punctuation">.</span>vect<span class="token punctuation">,</span><span class="token string">&quot;vect[7]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">//________________________</span>
<span class="token comment">// Branch &#x4E3A;&#x53D8;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;</span>
t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;nmec&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>gstep<span class="token punctuation">.</span>nmec<span class="token punctuation">,</span><span class="token string">&quot;nmec/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;lmec&quot;</span><span class="token punctuation">,</span>gstep<span class="token punctuation">.</span>lmec<span class="token punctuation">,</span><span class="token string">&quot;lmec[nmec]/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre><ul>
<li><strong>Adding Friends to Trees</strong></li>
</ul>
<blockquote>
<ul>
<li>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;&#x5DF2;&#x6709;&#x7684; Tree &#x6DFB;&#x52A0;&#x65B0;&#x7684; Branch. ROOT &#x91CC;&#x9762;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;.</li>
<li>&#x65B9;&#x6CD5;1: &#x6DFB;&#x52A0;&#x65B0;&#x7684; Branch - &#x586B;&#x5145; - &#x5199;&#x5165;. &#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x9700;&#x8981;&#x5BF9;&#x6587;&#x4EF6;&#x6709;&#x53EF;&#x5199;&#x6743;&#x9650;,<br>
&#x540C;&#x65F6;&#x5B58;&#x5728;&#x635F;&#x574F;&#x539F;&#x6709; Tree &#x6570;&#x636E;&#x7684;&#x98CE;&#x9669;. &#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF01;</li>
<li>TTree::AddFriend &#x65B9;&#x6CD5;. &#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x597D;&#x5904;&#x662F;&#x4E0D;&#x7528;&#x5192;&#x635F;&#x574F;&#x539F;&#x6709;&#x6570;&#x636E;&#x7684;&#x98CE;&#x9669;.</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/tutorials/tree/tree3.C</span>

<span class="token comment">//_____________________________</span>
<span class="token comment">// Tree::AddFriend() &#x65B9;&#x6CD5;</span>
<span class="token comment">// &#x4E24;&#x4E2A;&#x53C2;&#x6570;: &#x53C2;&#x6570;&#x4E00;&#x662F;friend tree name&#xFF0C;&#x53C2;&#x6570;&#x4E8C;&#x662F; friend tree &#x6240;&#x5728;&#x6587;&#x4EF6;</span>
<span class="token comment">// &#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;&#x6587;&#x4EF6;, &#x5219; ft1 &#x9ED8;&#x8BA4;&#x4E0E;&#x539F;&#x6709; Tree &#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;</span>
<span class="token comment">// Friend Tree &#x7684; entries &#x5FC5;&#x987B;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E; &#x539F;&#x6709; Tree &#x7684; entries</span>
tree<span class="token punctuation">.</span><span class="token function">AddFriend</span><span class="token punctuation">(</span><span class="token string">&quot;ft1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;friendfile1.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//___________________________</span>
<span class="token comment">// &#x7A0B;&#x5E8F;&#x4E3E;&#x4F8B;</span>
<span class="token keyword">void</span> <span class="token function">tree3w</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
   <span class="token keyword">const</span> Int_t kMaxTrack <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
   Int_t ntrack<span class="token punctuation">;</span>
   Int_t stat<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Int_t sign<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t px<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t py<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t pz<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t pt<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t zv<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Float_t chi2<span class="token punctuation">[</span>kMaxTrack<span class="token punctuation">]</span><span class="token punctuation">;</span>
   Double_t sumstat<span class="token punctuation">;</span>

   <span class="token comment">// create the first root file with a tree</span>
   TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;tree3.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;recreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Reconst ntuple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;ntrack&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>ntrack<span class="token punctuation">,</span><span class="token string">&quot;ntrack/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;stat&quot;</span><span class="token punctuation">,</span>stat<span class="token punctuation">,</span><span class="token string">&quot;stat[ntrack]/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;sign&quot;</span><span class="token punctuation">,</span>sign<span class="token punctuation">,</span><span class="token string">&quot;sign[ntrack]/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span>px<span class="token punctuation">,</span><span class="token string">&quot;px[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;py&quot;</span><span class="token punctuation">,</span>py<span class="token punctuation">,</span><span class="token string">&quot;py[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;pz&quot;</span><span class="token punctuation">,</span>pz<span class="token punctuation">,</span><span class="token string">&quot;pz[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;zv&quot;</span><span class="token punctuation">,</span>zv<span class="token punctuation">,</span><span class="token string">&quot;zv[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;chi2&quot;</span><span class="token punctuation">,</span>chi2<span class="token punctuation">,</span><span class="token string">&quot;chi2[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// create the second root file with a different tree</span>
   TFile <span class="token function">fr</span><span class="token punctuation">(</span><span class="token string">&quot;tree3f.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;recreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>t3f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;t3f&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a friend Tree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3f<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;ntrack&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>ntrack<span class="token punctuation">,</span><span class="token string">&quot;ntrack/I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3f<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;sumstat&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>sumstat<span class="token punctuation">,</span><span class="token string">&quot;sumstat/D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3f<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;pt&quot;</span><span class="token punctuation">,</span>pt<span class="token punctuation">,</span><span class="token string">&quot;pt[ntrack]/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Fill the trees</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">1000</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Int_t nt <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Rndm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>kMaxTrack<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ntrack <span class="token operator">=</span> nt<span class="token punctuation">;</span>
      sumstat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token comment">// set the values in each track</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>nt<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         stat<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">;</span>
         sign<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
         px<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         py<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         pz<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zv<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         chi2<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         sumstat <span class="token operator">+=</span> chi2<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
         pt<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token operator">=</span> TMath<span class="token operator">::</span><span class="token function">Sqrt</span><span class="token punctuation">(</span>px<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">*</span>px<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">+</span> py<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">*</span>py<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      t3<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      t3f<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// Write the two files</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   f<span class="token punctuation">.</span><span class="token function">cd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   fr<span class="token punctuation">.</span><span class="token function">cd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3f<span class="token operator">-&gt;</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Function to read the two files and add the friend</span>
<span class="token keyword">void</span> <span class="token function">tree3r</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         
<span class="token punctuation">{</span>
   TFile <span class="token operator">*</span>f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;tree3.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>t3 <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">AddFriend</span><span class="token punctuation">(</span><span class="token string">&quot;t3f&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tree3f.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t3<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;pz&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pt&gt;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">tree3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">tree3w</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">tree3r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><ul>
<li><strong>A Tree with a Class</strong></li>
</ul>
<blockquote>
<ul>
<li>Show the difference in splitting or not splitting a branch</li>
<li>At the TreeViewer: the branch split expands when clicked on, the branch not<br>
split is not expandable.</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/tutorials/tree/tree4.C</span>
<span class="token comment">//_________________________________________</span>
<span class="token comment">// The Event Class</span>
<span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token operator">:</span> <span class="token keyword">public</span> TObject <span class="token punctuation">{</span>
   <span class="token keyword">private</span><span class="token operator">:</span>
      <span class="token keyword">char</span>                 fType<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      Int_t                fNtrack<span class="token punctuation">;</span>
      Int_t                fNseg<span class="token punctuation">;</span>
      Int_t                fNvertex<span class="token punctuation">;</span>
      UInt_t               fFlag<span class="token punctuation">;</span>
      Float_t              fTemperature<span class="token punctuation">;</span>
      EventHeader          fEvtHdr<span class="token punctuation">;</span>
      TClonesArray        <span class="token operator">*</span>fTracks<span class="token punctuation">;</span>            <span class="token comment">//-&gt;</span>
      TH1F                <span class="token operator">*</span>fH<span class="token punctuation">;</span>                 <span class="token comment">//-&gt;</span>
      Int_t                fMeasures<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      Float_t              fMatrix<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      Float_t             <span class="token operator">*</span>fClosestDistance<span class="token punctuation">;</span>   <span class="token comment">//[fNvertex]</span>
      <span class="token keyword">static</span> TClonesArray <span class="token operator">*</span>fgTracks<span class="token punctuation">;</span>
      <span class="token keyword">static</span> TH1F         <span class="token operator">*</span>fgHist<span class="token punctuation">;</span>
      <span class="token comment">// ... list of methods</span>
      <span class="token function">ClassDef</span><span class="token punctuation">(</span><span class="token type-opencl-host-c++ keyword">Event</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//Event structure</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//_______________________________________</span>
<span class="token comment">// The EventHeader Class</span>
<span class="token keyword">class</span> <span class="token class-name">EventHeader</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span><span class="token operator">:</span>
      Int_t   fEvtNum<span class="token punctuation">;</span>
      Int_t   fRun<span class="token punctuation">;</span>
      Int_t   fDate<span class="token punctuation">;</span>
      <span class="token comment">// ... list of methods</span>
      <span class="token function">ClassDef</span><span class="token punctuation">(</span>EventHeader<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>      <span class="token comment">//Event Header</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//______________________________________</span>
<span class="token comment">// The Track Class</span>
<span class="token keyword">class</span> <span class="token class-name">Track</span> <span class="token operator">:</span> <span class="token keyword">public</span> TObject <span class="token punctuation">{</span>
   <span class="token keyword">private</span><span class="token operator">:</span>
      Float_t   fPx<span class="token punctuation">;</span>         <span class="token comment">//X component of the momentum</span>
      Float_t   fPy<span class="token punctuation">;</span>         <span class="token comment">//Y component of the momentum</span>
      Float_t   fPz<span class="token punctuation">;</span>         <span class="token comment">//Z component of the momentum</span>
      Float_t   fRandom<span class="token punctuation">;</span>     <span class="token comment">//A random track quantity</span>
      Float_t   fMass2<span class="token punctuation">;</span>      <span class="token comment">//The mass square of this particle</span>
      Float_t   fBx<span class="token punctuation">;</span>         <span class="token comment">//X intercept at the vertex</span>
      Float_t   fBy<span class="token punctuation">;</span>         <span class="token comment">//Y intercept at the vertex</span>
      Float_t   fMeanCharge<span class="token punctuation">;</span> <span class="token comment">//Mean charge deposition of all hits</span>
      Float_t   fXfirst<span class="token punctuation">;</span>     <span class="token comment">//X coordinate of the first point</span>
      Float_t   fXlast<span class="token punctuation">;</span>      <span class="token comment">//X coordinate of the last point</span>
      Float_t   fYfirst<span class="token punctuation">;</span>     <span class="token comment">//Y coordinate of the first point</span>
      Float_t   fYlast<span class="token punctuation">;</span>      <span class="token comment">//Y coordinate of the last point</span>
      Float_t   fZfirst<span class="token punctuation">;</span>     <span class="token comment">//Z coordinate of the first point</span>
      Float_t   fZlast<span class="token punctuation">;</span>      <span class="token comment">//Z coordinate of the last point</span>
      Float_t   fCharge<span class="token punctuation">;</span>     <span class="token comment">//Charge of this track</span>
      Float_t   fVertex<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//Track vertex position</span>
      Int_t     fNpoint<span class="token punctuation">;</span>     <span class="token comment">//Number of points for this track</span>
      Short_t   fValid<span class="token punctuation">;</span>      <span class="token comment">//Validity criterion</span>

      <span class="token comment">// method definitions ...</span>
      <span class="token function">ClassDef</span><span class="token punctuation">(</span>Track<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>          <span class="token comment">//A track segment</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">//_________________________________________________</span>
<span class="token keyword">void</span> <span class="token function">tree4w</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>TClassTable<span class="token operator">::</span><span class="token function">GetDict</span><span class="token punctuation">(</span><span class="token string">&quot;Event&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      gSystem<span class="token operator">-&gt;</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">&quot;$ROOTSYS/test/libEvent.so&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;tree4.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;RECREATE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token function">t4</span><span class="token punctuation">(</span><span class="token string">&quot;t4&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;A Tree with Events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token type-opencl-host-c++ keyword">Event</span> <span class="token operator">*</span>event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token type-opencl-host-c++ keyword">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t4<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;event_branch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Event&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>event<span class="token punctuation">,</span><span class="token number">16000</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t4<span class="token punctuation">.</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;event_not_split&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Event&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>event<span class="token punctuation">,</span><span class="token number">16000</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// a local variable for the event type</span>
   <span class="token keyword">char</span> etype<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment">// fill the tree</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t ev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ev <span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> ev<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Float_t sigmat<span class="token punctuation">,</span> sigmas<span class="token punctuation">;</span>
      gRandom<span class="token operator">-&gt;</span><span class="token function">Rannor</span><span class="token punctuation">(</span>sigmat<span class="token punctuation">,</span>sigmas<span class="token punctuation">)</span><span class="token punctuation">;</span>
      Int_t ntrack   <span class="token operator">=</span> <span class="token function">Int_t</span><span class="token punctuation">(</span><span class="token number">600</span> <span class="token operator">+</span> <span class="token number">600</span> <span class="token operator">*</span>sigmat<span class="token operator">/</span><span class="token number">120.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Float_t random <span class="token operator">=</span> gRandom<span class="token operator">-&gt;</span><span class="token function">Rndm</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">sprintf</span><span class="token punctuation">(</span>etype<span class="token punctuation">,</span><span class="token string">&quot;type%d&quot;</span><span class="token punctuation">,</span>ev<span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetType</span><span class="token punctuation">(</span>etype<span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetHeader</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">960312</span><span class="token punctuation">,</span> random<span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetNseg</span><span class="token punctuation">(</span><span class="token function">Int_t</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span>ntrack<span class="token operator">+</span><span class="token number">20</span><span class="token operator">*</span>sigmas<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetNvertex</span><span class="token punctuation">(</span><span class="token function">Int_t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">20</span><span class="token operator">*</span>gRandom<span class="token operator">-&gt;</span><span class="token function">Rndm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetFlag</span><span class="token punctuation">(</span><span class="token function">UInt_t</span><span class="token punctuation">(</span>random<span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      event<span class="token operator">-&gt;</span><span class="token function">SetTemperature</span><span class="token punctuation">(</span>random<span class="token operator">+</span><span class="token number">20.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span>UChar_t m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         event<span class="token operator">-&gt;</span><span class="token function">SetMeasure</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token function">Int_t</span><span class="token punctuation">(</span>gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
                                       <span class="token comment">// continued...</span>
      <span class="token comment">// fill the matrix</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span>UChar_t i0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i0 <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i0<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">for</span><span class="token punctuation">(</span>UChar_t i1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i1 <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i1<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            event<span class="token operator">-&gt;</span><span class="token function">SetMatrix</span><span class="token punctuation">(</span>i0<span class="token punctuation">,</span>i1<span class="token punctuation">,</span>gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span>i0<span class="token operator">*</span>i1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// create and fill the Track objects</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> ntrack<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span> event<span class="token operator">-&gt;</span><span class="token function">AddTrack</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
      t4<span class="token punctuation">.</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Fill the tree</span>
      event<span class="token operator">-&gt;</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Clear before reloading event</span>
   <span class="token punctuation">}</span>
   f<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Write the file header</span>
   t4<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// Print the tree contents</span>
<span class="token punctuation">}</span>
</pre><ul>
<li><strong>&#x5BFC;&#x5165;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x5B58;&#x6210; Tree</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x4F7F;&#x7528; TTree::ReadFile &#x65B9;&#x6CD5;</span>
<span class="token comment">// Long64_t TTree::ReadFile(const char* filename, </span>
<span class="token comment">//                          const char* branchDescriptor)</span>
<span class="token comment">//______________________________________________________</span>
<span class="token punctuation">{</span>
   gROOT<span class="token operator">-&gt;</span><span class="token function">Reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TFile <span class="token operator">*</span>f  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;basic2.root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;RECREATE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TH1F  <span class="token operator">*</span>h1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH1F</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;x distribution&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>T  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;ntuple&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data from ascii file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Long64_t nlines <span class="token operator">=</span> T<span class="token operator">-&gt;</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;basic.dat&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;x:y:z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; found %lld pointsn&quot;</span><span class="token punctuation">,</span>nlines<span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;z&gt;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
&#x8BF4;&#x660E;1: &#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A; &apos;branchDescriptor&apos;, &#x5219;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x9700;&#x8981;&#x6709;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x6837;:
      A/D : Table[2]/F:Ntracks/I:astring/C
&#x8BF4;&#x660E;2: &#x56E0;&#x6B64;&#x63A8;&#x8350;&#x4F7F;&#x7528; &apos;branchDescriptor&apos;. &#x5982; &quot;x:y:z&quot;
&#x8BF4;&#x660E;3: &#x5FFD;&#x7565;&#x4EE5; &quot;#&quot; &#x5F00;&#x5934;&#x7684;&#x884C;
*/</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-246-tree-%E7%9A%84%E8%AF%BB%E5%8F%96font"><font color="#FF00FF">  2.4.6 Tree &#x7684;&#x8BFB;&#x53D6;</font></h4>

<blockquote>
<ul>
<li>Tree &#x7684;&#x8BFB;&#x53D6;&#x6B65;&#x9AA4;<br>
(1) &#x6253;&#x5F00; .root &#x6587;&#x4EF6;<br>
(2) &#x8BFB;&#x53D6; .root &#x6587;&#x4EF6;&#x4E2D;&#x7684; Tree<br>
(3) &#x5B9A;&#x4E49;&#x53D8;&#x91CF;<br>
(4) SetBranchAddress<br>
(5) &#x83B7;&#x53D6;&#x603B; entry&#x6570;<br>
(6) &#x9010;&#x4E2A; entry &#x8BFB;&#x53D6;&#x6570;&#x636E;</li>
</ul>
</blockquote>
<ul>
<li><strong>Tree &#x8BFB;&#x53D6;&#x7684;&#x57FA;&#x672C;&#x6B65;&#x9AA4;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/tutorials/tree/tree1.C</span>
<span class="token comment">//________________________________________</span>
<span class="token keyword">void</span> <span class="token function">tree1r</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   TFile<span class="token operator">*</span> f  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;tree1.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// step1. &#x6253;&#x5F00;&#x6587;&#x4EF6;</span>
   TTree<span class="token operator">*</span> t1 <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// step2. &#x8BFB;&#x53D6; Tree</span>

   Float_t px<span class="token punctuation">,</span> py<span class="token punctuation">,</span> pz<span class="token punctuation">;</span>                       <span class="token comment">// step3. &#x5B9A;&#x4E49;&#x53D8;&#x91CF;</span>
   Double_t random<span class="token punctuation">;</span>
   Int_t ev<span class="token punctuation">;</span>

   t1<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// step4. SetBranchAddress</span>
   t1<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;py&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>py<span class="token punctuation">)</span><span class="token punctuation">;</span>
   t1<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;pz&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>pz<span class="token punctuation">)</span><span class="token punctuation">;</span>
   t1<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;random&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
   t1<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;ev&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>

   TH1F<span class="token operator">*</span> hpx   <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH1F</span><span class="token punctuation">(</span><span class="token string">&quot;hpx&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;px distribution&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TH2F<span class="token operator">*</span> hpxpy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH2F</span><span class="token punctuation">(</span><span class="token string">&quot;hpxpy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;py vs px&quot;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   Long64_t nentries <span class="token operator">=</span> t1<span class="token operator">-&gt;</span><span class="token function">GetEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// step5. &#x83B7;&#x53D6;&#x603B; entry &#x6570;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Long64_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     
     t1<span class="token operator">-&gt;</span><span class="token function">GetEntry</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment">// step6. &#x9010;&#x4E2A; entry &#x8BFB;&#x53D6;&#x6570;&#x636E; </span>
     hpx<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>
     hpxpy<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>px<span class="token punctuation">,</span>py<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li><strong>GetEntry &#x7684;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;</strong></li>
</ul>
<blockquote>
<ul>
<li>Once the branches have been given the address, a specific entry can be read into variables with method TTree::GetEntery(n).</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x65B9;&#x5F0F;1: &#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x7684;, &#x4E5F;&#x662F;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x5F0F;</span>
<span class="token comment">//_______________________________________</span>
<span class="token type-opencl-host-c++ keyword">Event</span><span class="token operator">*</span> event <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// event must be initialized</span>
T<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>

Long64_t nentries <span class="token operator">=</span> t1<span class="token operator">-&gt;</span><span class="token function">GetEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  t1<span class="token operator">-&gt;</span><span class="token function">GetEntry</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// the object event has been filled at this point</span>
<span class="token punctuation">}</span>


<span class="token comment">// &#x65B9;&#x5F0F;2: the option AutoDelete is set</span>
<span class="token comment">//______________________________________</span>
<span class="token comment">// At any iteration, the GetEntry deletes the object event and a new</span>
<span class="token comment">// instance of Event is created and filled. </span>
TBranch<span class="token operator">*</span> branch <span class="token operator">=</span> T<span class="token operator">-&gt;</span><span class="token function">GetBranch</span><span class="token punctuation">(</span><span class="token string">&quot;event&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
branch<span class="token operator">-&gt;</span><span class="token function">SetAddress</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
branch<span class="token operator">-&gt;</span><span class="token function">SetAutoDelete</span><span class="token punctuation">(</span>kTRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  T<span class="token operator">-&gt;</span><span class="token function">GetEntry</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// the object event has been filled at this point</span>
<span class="token punctuation">}</span>


<span class="token comment">// &#x65B9;&#x5F0F;3: &#x4E0E;&#x65B9;&#x5F0F;1&#x4E00;&#x6837;, &#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x624B;&#x52A8;delete</span>
<span class="token comment">//___________________________________</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">delete</span> event<span class="token punctuation">;</span>
  event <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//Extremely Important!</span>
  T<span class="token operator">-&gt;</span><span class="token function">GetEntry</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// the object event has been filled at this point</span>
<span class="token punctuation">}</span>

</pre><ul>
<li><strong>&#x8BFB;&#x53D6;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x7684; Branch</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x6570;&#x636E;&#x5206;&#x6790;&#x65F6;, &#x6211;&#x4EEC;&#x6709;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A; Tree &#x7684;&#x5168;&#x90E8; Branch,&#x8FD9;&#x6837;&#x66F4;&#x52A0;&#x9AD8;&#x6548;.</span>

<span class="token comment">//_____________________________________________</span>
<span class="token comment">// &#x65B9;&#x5F0F;1: branch-&gt;SetBranchStatus(&quot;*&quot;,false);</span>
<span class="token comment">// &#x5148;&#x5173;&#x95ED;&#x6240;&#x6709;&#x7684; branch, &#x7136;&#x540E;&#x901A;&#x8FC7; SetBranchAddress() &#x65B9;&#x5F0F;&#x6253;&#x5F00;&#x7279;&#x5B9A;&#x7684; branch</span>
myData<span class="token operator">-&gt;</span><span class="token function">SetBranchStatus</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myData<span class="token operator">-&gt;</span><span class="token function">SetBranchStatus</span><span class="token punctuation">(</span><span class="token string">&quot;SSD1_L1S_E&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myData<span class="token operator">-&gt;</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;SSD1_L1S_E&quot;</span><span class="token punctuation">,</span>SSD1_L1S_E<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//___________________________________________</span>
<span class="token comment">// &#x65B9;&#x5F0F;2: TBranch &#x65B9;&#x6CD5;</span>
TFile<span class="token operator">*</span> f  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;tree.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TTree<span class="token operator">*</span> t2 <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> Float_t destep<span class="token punctuation">;</span>
TBranch<span class="token operator">*</span> b_destep <span class="token operator">=</span> t2<span class="token operator">-&gt;</span><span class="token function">GetBranch</span><span class="token punctuation">(</span><span class="token string">&quot;destep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b_destep<span class="token operator">-&gt;</span><span class="token function">SetAddress</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>destep<span class="token punctuation">)</span><span class="token punctuation">;</span> 

Int_t nentries <span class="token operator">=</span> <span class="token punctuation">(</span>Int_t<span class="token punctuation">)</span>t2<span class="token operator">-&gt;</span><span class="token function">GetEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  b_destep<span class="token operator">-&gt;</span><span class="token function">GetEntry</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><ul>
<li><strong>TTreeReader - ROOT6 &#x4E2D;&#x8BFB;&#x53D6; Tree &#x7684;&#x65B0;&#x65B9;&#x6CD5;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">//_______________________________________________</span>
<span class="token keyword">void</span> <span class="token function">TreeReaderSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  TH1F<span class="token operator">*</span>  myHist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH1F</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ntuple&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  TFile<span class="token operator">*</span> myFile <span class="token operator">=</span> TFile<span class="token operator">::</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;hsimple.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  TTreeReader <span class="token function">myReader</span><span class="token punctuation">(</span><span class="token string">&quot;ntuple&quot;</span><span class="token punctuation">,</span> myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
  TTreeReaderValue<span class="token operator">&lt;</span>Float_t<span class="token operator">&gt;</span> <span class="token function">myPx</span><span class="token punctuation">(</span>myReader<span class="token punctuation">,</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  TTreeReaderValue<span class="token operator">&lt;</span>Float_t<span class="token operator">&gt;</span> <span class="token function">myPy</span><span class="token punctuation">(</span>myReader<span class="token punctuation">,</span> <span class="token string">&quot;py&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>myReader<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      myHist<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token operator">*</span>myPx <span class="token operator">+</span> <span class="token operator">*</span>myPy<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   myHist<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-247-tchain-font"><font color="#FF00FF">  2.4.7 TChain </font></h4>

<blockquote>
<ul>
<li>A TChain object is a list of ROOT files containing the same tree.</li>
</ul>
</blockquote>
<ul>
<li><strong>TChain &#x7684;&#x7528;&#x6CD5;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// TChain &#x7528;&#x6CD5;&#x4E3E;&#x4F8B;</span>
<span class="token comment">//_____________________</span>
<span class="token punctuation">{</span>
   TChain <span class="token function">chain</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   chain<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;file1.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   chain<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;file2.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   chain<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;file3.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TH1F <span class="token operator">*</span>hnseg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH1F</span><span class="token punctuation">(</span><span class="token string">&quot;hnseg&quot;</span><span class="token punctuation">,</span>
                          <span class="token string">&quot;Number of segments for selected tracks&quot;</span><span class="token punctuation">,</span>
                          <span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token type-opencl-host-c++ keyword">Event</span> <span class="token operator">*</span>event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token type-opencl-host-c++ keyword">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   chain<span class="token punctuation">.</span><span class="token function">SetBranchAddress</span><span class="token punctuation">(</span><span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Start main loop on all events In case you want to read only a few</span>
   <span class="token comment">// branches, use TChain::SetBranchStatus to activate a branch.</span>
   Int_t nevent <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">GetEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nevent<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      chain<span class="token punctuation">.</span><span class="token function">GetEvent</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      hnseg<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">GetNseg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   hnseg<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><ul>
<li><strong>TChain::AddFriend</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// The original chain has access to all variables in its friends</span>
TChain <span class="token function">ch</span><span class="token punctuation">(</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TChain <span class="token function">ch1</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TChain <span class="token function">ch2</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TChain <span class="token function">ch3</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ch<span class="token punctuation">.</span><span class="token function">AddFriend</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ch<span class="token punctuation">.</span><span class="token function">AddFriend</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ch<span class="token punctuation">.</span><span class="token function">AddFriend</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>&#x6587;&#x4EF6;&#x5408;&#x5E76;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// ROOT files containing the same data objects(e.g. histograms, Trees, etc...) </span>
<span class="token comment">// can be merged using line tool $ROOTSYS/bin/hadd</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> hadd fileOut<span class="token punctuation">.</span>root file1<span class="token punctuation">.</span>root file2<span class="token punctuation">.</span>root file3<span class="token punctuation">.</span>root

</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-248-data-analysis-treedraw-font"><font color="#FF00FF">  2.4.8 Data Analysis - Tree::Draw </font></h4>

<blockquote>
<ul>
<li>The TTree::Draw method is powerful yet look and draw the tree contents.<br>
It enables us to plot a variable (a leaf) with just one line of code.</li>
<li>The TTree::MakeClass creates a class that loops over the trees entries one by one.</li>
<li>The TTree::MakeSelector is the recommended method for ROOT data analysis.<br>
It is especially important for large data set in parallel processing.</li>
<li>With MakeClass the user has control over the event loop, with MakeSelector the<br>
tree is in control of event loop.</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// TTree::Draw &#x7684;&#x53C2;&#x6570;</span>
Long64_t <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> varexp<span class="token punctuation">,</span> <span class="token keyword">const</span> TCut<span class="token operator">&amp;</span> selection<span class="token punctuation">,</span> 
              Option_t<span class="token operator">*</span> option <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> 
              Long64_t nentries <span class="token operator">=</span> kMaxEntries<span class="token punctuation">,</span> 
              Long64_t firstentry <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
</pre><ul>
<li><strong>TTree::Draw &#x53C2;&#x6570;&#x4E4B; &quot;varxep(&#x53D8;&#x91CF;&#x8868;&#x8FBE;&#x5F0F;)&quot;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// TTree::Draw &#x6700;&#x57FA;&#x672C;&#x7684;&#x7528;&#x6CD5;</span>
MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// Age &#x662F; MyTree &#x7684;&#x4E00;&#x4E2A;&#x53D8;&#x91CF; (leaf)</span>
MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2D histogram Cost vs. Age</span>
MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;e1:e2:e3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5230; 3D histogram</span>
</pre><ul>
<li><strong>Using Selection with TTree::Draw</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp">MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nation == &quot;</span>FR<span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//_________________________________</span>
<span class="token comment">// We can use any C++ operator, and some functions defined in TFormula,</span>
<span class="token comment">// in the selection parameter.</span>
<span class="token comment">// If the boolean result is true, the histogram is filled with a weight.</span>
<span class="token comment">// If the weight is not explicity</span>
Selection <span class="token operator">=</span> <span class="token string">&quot;weight *(boolean expression)&quot;</span>

<span class="token comment">// Add 1 to the histogram if x is less than y and sqrt(z)&gt;3.2</span>
<span class="token string">&quot;x&lt;y &amp;&amp; sqrt(z)&gt;3.2&quot;</span>

<span class="token comment">// Add x+y to the histogram if sqrt(z)&gt;3.2</span>
<span class="token string">&quot;(x+y)*(sqrt(z)&gt;3.2)&quot;</span>
</pre><ul>
<li><strong>TTree::Draw &#x53C2;&#x6570;&#x4E4B; &quot;TCut&quot;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp">root<span class="token punctuation">[</span><span class="token punctuation">]</span> TCut c1 <span class="token operator">=</span> <span class="token string">&quot;x&lt;1&quot;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TCut c2 <span class="token operator">=</span> <span class="token string">&quot;y&lt;0&quot;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TCut c3 <span class="token operator">=</span> c1 <span class="token operator">&amp;&amp;</span> c2<span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> MyTree<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> MyTree<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> c1 <span class="token operator">||</span> <span class="token string">&quot;x&gt;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> myTree<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> c1 <span class="token operator">&amp;&amp;</span> c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>TTree::Draw &#x53C2;&#x6570;&#x4E4B; &quot;Draw Option&quot;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// The draw options are the same as for TH1::Draw.</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nation == \&quot;FR\&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SURF2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>TTree::Draw &#x53C2;&#x6570;&#x4E4B; &quot;Setting the Range&quot;</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// There are two parameters to set the range.</span>
<span class="token comment">// One is the number of entriess</span>
<span class="token comment">// The second is the entry to start with</span>
<span class="token comment">// This command draws 1000 entries starting with entry 100.</span>
MyTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>From TTree::Draw to Histogram</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x65B9;&#x6CD5;1: gPad-&gt;GetPrimitive();</span>
<span class="token comment">//______________________________________</span>
<span class="token comment">// The TTree::Draw method creates a histogram called &apos;htemp&apos; </span>
<span class="token comment">// and puts it on the active pad.</span>
nt<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cuts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TH1F<span class="token operator">*</span> htemp <span class="token operator">=</span> <span class="token punctuation">(</span>TH1F<span class="token operator">*</span><span class="token punctuation">)</span>gPad<span class="token operator">-&gt;</span><span class="token function">GetPrimitive</span><span class="token punctuation">(</span><span class="token string">&quot;htemp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// &#x65B9;&#x6CD5;2: </span>
nt<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x&gt;&gt;hnew&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cuts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TH1F<span class="token operator">*</span> hnew <span class="token operator">=</span> <span class="token punctuation">(</span>TH1F<span class="token operator">*</span><span class="token punctuation">)</span>gDirectory<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;hnew&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// TH1F* hnew = (TH1F*)gPad-&gt;GetPrimitive(&quot;hnew&quot;);</span>
</pre><ul>
<li><strong>Superimposing Two Histograms</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token punctuation">{</span>
   TH2 <span class="token operator">*</span>h2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH2D</span> <span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2D histo&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
     h2<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>gRandom<span class="token operator">-&gt;</span><span class="token function">Gaus</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   h2<span class="token operator">-&gt;</span><span class="token function">SetMarkerColor</span><span class="token punctuation">(</span>kGreen<span class="token punctuation">)</span><span class="token punctuation">;</span>
   h2<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   TFile <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;staff.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TTree <span class="token operator">*</span>myTree <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   gPad<span class="token operator">-&gt;</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Need to update the pad between Draw commands</span>
   myTree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;Cost:Age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;same&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p><strong>TTree::Draw Examples</strong></p>
<blockquote>
<ul>
<li>&#x7565;. &#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x89C1; &quot;ROOT User Guide&quot;</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Multiple Variables Visualisation - Spider (Radar) Plots</strong></p>
<blockquote>
<ul>
<li>Used to represent multiple variables(&gt;4) data sets.</li>
<li>Variables are respresented on individual axes displayed along a circle.</li>
<li>The minimum value sits on the circle&apos;s center, and the maximum on the circle&apos;s radius.</li>
<li>Spider plots are not suitable for an accurate graph, since it can be diffficult to read out<br>
very details values, but they give quickly a global view of an event in order to compare<br>
with others.<br>
<img src="ROOT/pictures/spider2.png" alt="Spider Plot"></li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Multiple Variables Visualisation - Parallel Coordinates Plots</strong></p>
<blockquote>
<ul>
<li>The Parallel Coordinates Plots are a commom way of studying and visualizing<br>
multiple variables data sets.</li>
<li>In Parallel coordinates, all axes are parallel which allows representing data<br>
in much more than three dimensions.</li>
<li>A point in n-dimensional space is represented as a polyline with vertices on<br>
the parallel axes.</li>
<li>&#x5E73;&#x884C;&#x5750;&#x6807;&#x7684;&#x4F18;&#x70B9;: spotting irregular events, seeing the data trend, find correlations and clusters.</li>
<li>&#x5E73;&#x884C;&#x5750;&#x6807;&#x7684;&#x7F3A;&#x70B9;: Difficult to see the data clusters.<br>
<img src="ROOT/pictures/para14.png" alt="Parallel Coordinates with transparency."></li>
</ul>
</blockquote>
</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5E73;&#x884C;&#x5750;&#x6807;?</span>
<span class="token comment">// Using the plotting option &quot;PARA&quot; in the TTree::Draw() method.</span>
tree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x:y:z&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PARA&quot;</span><span class="token punctuation">)</span>

</pre><ul>
<li><strong>Multiple Variables Visualisation - Box (Candle) Plots</strong>
<blockquote>
<ul>
<li>A Box Plot is a convenient way to describe graphically a data distribution (D)<br>
with only five numbers.<br>
(1) The minimum value of the distribution D (Min).<br>
(2) The lower quartile (Q1): 25% of the data points in D are less than Q1.<br>
(3) The median (M): 50% of the data points in D are less than M.<br>
(4) The upper quartile (Q3): 75% of the data points in D are less than Q3.<br>
(5) The maximum value of the distribution D (Max).<br>
<img src="ROOT/pictures/bp1.png" alt="A box plot describes a distribution with only five numbers. "></li>
</ul>
</blockquote>
</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x5982;&#x4F55;&#x4F7F;&#x7528; Box Plots(Candle Plots)</span>
tree<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;x:y:z&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;candle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong>TEventList and TEntryList</strong>
<blockquote>
<ul>
<li>&#x5F53; TTree::Draw &#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x524D;&#x6709; &quot;&gt;&gt;&quot; &#x65F6;, ROOT &#x5C06;&#x4E0D;&#x4F1A;&#x753B;&#x4EFB;&#x4F55;&#x4E1C;&#x897F;, &#x800C;&#x662F;&#x5C06; entries &#x4FDD;&#x5B58;&#x5728;&#x4E00;&#x4E2A; list &#x4E2D;</li>
<li>&#x5F53;&#x4F7F;&#x7528; &quot;&gt;&gt;&quot; &#x65F6;, list &#x4E2D;&#x7684;&#x6240;&#x6709;&#x4E1C;&#x897F;&#x5C06;&#x88AB;&#x91CD;&#x65B0;&#x8986;&#x76D6;.</li>
<li>TEventList &#x4E0E; TEntryList:<br>
1.&#x529F;&#x80FD;&#x76F8;&#x540C;: both are used to store entry numbers<br>
2.TEntryList: uses less memory for storage, and is optimized for both very high<br>
and very low selectivity pf cuts.<br>
3.TEntryList makes a distinction between indices from a TChain and from a TTree.</li>
</ul>
</blockquote>
</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// Create a TEventList of all entries with more than 600 tracks</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile<span class="token operator">*</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;Event.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt; myList&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fNtrack &gt; 600&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> myList<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">//___________________________________</span>
<span class="token comment">// Using an Event List</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile<span class="token operator">*</span> f<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;Event.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TTree<span class="token operator">*</span> T <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;fNTrack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;myList&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;fNtrack &gt; 600&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;entrylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TEventList<span class="token operator">*</span> list <span class="token operator">=</span> <span class="token punctuation">(</span>TEventList<span class="token operator">*</span><span class="token punctuation">)</span>gDirectory<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;myList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">SetEntryList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;fNtrack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//____________________________________</span>
<span class="token comment">// Operations on TEntryLists</span>
<span class="token comment">// ** If you have entry lists that were created using different cuts, </span>
<span class="token comment">// ** you can comine the lists to get a new list</span>
<span class="token comment">// ** TEntryList::Add(), TEntryList::Enter(), TEntryList::Contains()...</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;list1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fNtrack&gt;600&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;entrylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TEntryList<span class="token operator">*</span> list1 <span class="token operator">=</span> <span class="token punctuation">(</span>TEntryList<span class="token operator">*</span><span class="token punctuation">)</span>gDirectory<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;list1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;list2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fNtrack&lt;590&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;entrylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TEntryList<span class="token operator">*</span> list2 <span class="token operator">=</span> <span class="token punctuation">(</span>TEntryList<span class="token operator">*</span><span class="token punctuation">)</span>gDirectory<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;list2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> lis1<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">SetEntryList</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;fNtrack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//____________________________________________</span>
<span class="token comment">// TEntryListFromFile</span>
<span class="token comment">// ** Used only when processing TChain objects.</span>
<span class="token comment">// ** It is used in this case, when the entry lists, corresponding to </span>
<span class="token comment">// ** the trees of this chain, are stored in separate files.</span>
<span class="token comment">// &#x53C2;&#x8003;&#x7A0B;&#x5E8F;: $ROOTSYS/test/stressEntryList.C</span>


<span class="token comment">//____________________________________________</span>
<span class="token comment">// Filling a Histogram</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile<span class="token operator">*</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;Event.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;fNtrack &gt;&gt; myHisto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

root<span class="token punctuation">[</span><span class="token punctuation">]</span> TH1D<span class="token operator">*</span> h1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TH1D</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">50.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;fNtrack &gt;&gt; h1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//___________________________________________</span>
<span class="token comment">// Profile a Histogram</span>
<span class="token comment">// ** Where pf is an existing TProfile histogram</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token string">&quot;y:x &gt;&gt; pf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre><ul>
<li><strong>Tree Information</strong>
<blockquote>
<ul>
<li>GetV1: Returns a pointer to the float array of the first variable.</li>
<li>GetV2: Returns a pointer to the float array of the second variable.</li>
<li>GetV3: Returns a pointer to the float array of the third variable.</li>
</ul>
</blockquote>
</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp">root<span class="token punctuation">[</span><span class="token punctuation">]</span> Float_t <span class="token operator">*</span>a<span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> T<span class="token operator">-&gt;</span><span class="token function">GetV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-249-data-analysis-treemakeclass-font"><font color="#FF00FF">  2.4.9 Data Analysis - Tree::MakeClass </font></h4>

<blockquote>
<ul>
<li>TTree::MakeClass generates a skeleton class designed to loop over the<br>
entries of the tree.</li>
<li>TTree::MakeClass &#x7684;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;:<br>
1.Call TTree::MakeClass<br>
2.Modify the myClass::Loop() method in myClass.C<br>
3.Load and instantiate myClass, and run myClass::Loop()</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// &#x5982;&#x4F55;&#x4F7F;&#x7528; MakeClass</span>
<span class="token comment">//_______________________________</span>
<span class="token comment">// Step1 : Call TTree::MakeCalss</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TFile<span class="token operator">*</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TFile</span><span class="token punctuation">(</span><span class="token string">&quot;staff.root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> TTree<span class="token operator">*</span> T <span class="token operator">=</span> <span class="token punctuation">(</span>TTree<span class="token operator">*</span><span class="token punctuation">)</span>f<span class="token operator">-&gt;</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">MakeClass</span><span class="token punctuation">(</span><span class="token string">&quot;myClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ** MakeClass &#x64CD;&#x4F5C;&#x5C06;&#x4EA7;&#x751F;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;: myClass.h , myClass.C</span>
<span class="token comment">// ** myClass.C &#x5305;&#x542B;&#x591A;&#x4E2A;&#x51FD;&#x6570;, myClass::Loop(), myClass::GetEntry(), ...</span>


<span class="token comment">//_________________________________________________</span>
<span class="token comment">// Step2 : Modify myClass::Loop() to fit your task</span>
<span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t jentry<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> jentry<span class="token operator">&lt;</span>nentries<span class="token punctuation">;</span>jentry<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">GetEntry</span><span class="token punctuation">(</span>jentry<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>Int_t j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         myHisto<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>fTracks_fPx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            smallHisto<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span>fTracks_fPx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">//_________________________________________________</span>
<span class="token comment">// Step3 : Load myClass.C, and run MyClass::Loop()</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>L myClass<span class="token punctuation">.</span>C
root<span class="token punctuation">[</span><span class="token punctuation">]</span> myClass <span class="token class-name">m</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> m<span class="token punctuation">.</span><span class="token function">Loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-2410-data-analysis-ttreemakeselector-font"><font color="#FF00FF">  2.4.10 Data Analysis - TTree::MakeSelector </font></h4>

<blockquote>
<ul>
<li>With a TTree we can make a selector and use it to process a limited set of entries.</li>
<li>Especially important in a parallel processing.</li>
<li>The TTree::Process method is used to specify the selector and the entries.</li>
<li>Before we can use TTree::Process we need to make a selector.</li>
<li>We can call the TTree::MakeSelector method. It creates two files similar to TTree::MakeClass.</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">//______________________________________________</span>
<span class="token comment">// TTree::MakeSelector &#x7684;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;:</span>
<span class="token number">1.</span> setup   TMySelector<span class="token operator">::</span><span class="token function">Init</span><span class="token punctuation">(</span>TTree <span class="token operator">*</span>tree<span class="token punctuation">)</span>
   <span class="token comment">// Chain = tree; fChain-&gt;SetBranchAddress()</span>
   <span class="token comment">// initialize branches</span>
<span class="token number">2.</span> start   TMySelector<span class="token operator">::</span><span class="token function">SlaveBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token comment">// create histograms</span>
<span class="token number">3.</span> run     TMySelector<span class="token operator">::</span><span class="token function">Process</span><span class="token punctuation">(</span>Long64_t<span class="token punctuation">)</span>
   <span class="token comment">// fChain-&gt;GetTree()-&gt;GetEntry(entry);</span>
   <span class="token comment">// analyze data, fill histograms,...</span>
<span class="token number">4.</span> end     TMySelector<span class="token operator">::</span><span class="token function">Terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token comment">// fit histograms, write them to files</span>

<span class="token comment">//______________________________________________</span>
<span class="token comment">// &#x5982;&#x4F55;&#x4F7F;&#x7528; TTree::MakeSelector</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">MakeSelector</span><span class="token punctuation">(</span><span class="token string">&quot;MySelector&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Process</span><span class="token punctuation">(</span><span class="token string">&quot;MySelector.C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// With &quot;++&quot;/&quot;+&quot;, the class will be compiled and dynamically loaded</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Process</span><span class="token punctuation">(</span><span class="token string">&quot;MySelector.C++&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">[</span><span class="token punctuation">]</span> T<span class="token operator">-&gt;</span><span class="token function">Process</span><span class="token punctuation">(</span><span class="token string">&quot;MySelector.C+&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// How to create a selector with a pointer</span>
<span class="token punctuation">{</span>
  MySelector <span class="token operator">*</span>selector <span class="token operator">=</span> <span class="token punctuation">(</span>MySelector<span class="token operator">*</span><span class="token punctuation">)</span>TSelector<span class="token operator">::</span><span class="token function">GetSelector</span><span class="token punctuation">(</span><span class="token string">&quot;MySelector.C+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  T<span class="token operator">-&gt;</span><span class="token function">Process</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><p>&#x2003;</p>
<h4 class="mume-header" id="font-colorff00ff-2411-tree-%E7%9A%84%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE-font"><font color="#FF00FF">  2.4.11 Tree &#x7684;&#x5176;&#x4ED6;&#x8BBE;&#x7F6E; </font></h4>

<ul>
<li><strong>Creating a Tree from a Folder Hierarchy</strong></li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// 1. An alternative way to create a tree and organize it is to use folders.</span>
<span class="token comment">// 2. You can build a folder structure and create a tree with branches for </span>
<span class="token comment">//    each of the sub-folders</span>
<span class="token comment">// 3. The second argument &quot;/MyFolder&quot; is the top folder, and the &quot;/&quot; signals the </span>
<span class="token comment">//    TTree constructor that this is a folder not just the title. </span>

TTree <span class="token function">folder_tree</span><span class="token punctuation">(</span><span class="token string">&quot;MyFolderTree&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/MyFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre><ul>
<li>
<p><strong>Autosve</strong></p>
<blockquote>
<ul>
<li>Autosave gives the option to save all the branch buffers every n byte.</li>
<li><font color="#DC143C"> &#x5BF9;&#x4E8E;&#x5927;&#x578B;&#x6570;&#x636E;&#x83B7;&#x53D6;, &#x63A8;&#x8350;&#x4F7F;&#x7528; Autosave &#x65B9;&#x6CD5;.</font> &#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x83B7;&#x53D6;&#x53D1;&#x751F;&#x5D29;&#x6E83;, &#x4E0A;&#x4E00;&#x6B21; autosave &#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x90FD;&#x80FD;&#x88AB;&#x4FDD;&#x7559;&#x4E0B;&#x6765;.</li>
<li>Autosave &#x7684;&#x4E24;&#x79CD;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;:<br>
(1) TTree::Autosave(Long64_t n);<br>
(2) Call TTree::Autosave in the acquisition loop every n entry.</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>Tree with Circle Buffers</strong></p>
</li>
</ul>
<pre data-role="codeBlock" data-info="C++" class="language-cpp"><span class="token comment">// It is very useful for monitoring.</span>
<span class="token comment">// maxEntries is the maximum number of entries to be kept in the buffers.</span>
<span class="token comment">// When the number of entries exceeds this value, the first entries </span>
<span class="token comment">// in the Tree are deleted and the buffers used again</span>
<span class="token keyword">void</span> TTree<span class="token operator">::</span><span class="token function">SetCircular</span><span class="token punctuation">(</span>Long64_t maxEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// &#x7A0B;&#x5E8F;&#x4E3E;&#x4F8B;</span>
<span class="token keyword">void</span> <span class="token function">circular</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
   gROOT<span class="token operator">-&gt;</span><span class="token function">cd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//make sure that the Tree is memory resident</span>
   TTree <span class="token operator">*</span>T <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TTree</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;test circular buffers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   TRandom r<span class="token punctuation">;</span>
   Float_t px<span class="token punctuation">,</span>py<span class="token punctuation">,</span>pz<span class="token punctuation">;</span>
   Double_t random<span class="token punctuation">;</span>
   UShort_t i<span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>px<span class="token punctuation">,</span><span class="token string">&quot;px/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;py&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>py<span class="token punctuation">,</span><span class="token string">&quot;py/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;pz&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>pz<span class="token punctuation">,</span><span class="token string">&quot;pz/F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;random&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>random<span class="token punctuation">,</span><span class="token string">&quot;random/D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">Branch</span><span class="token punctuation">(</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span><span class="token string">&quot;i/s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   T<span class="token operator">-&gt;</span><span class="token function">SetCircular</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">65000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      r<span class="token punctuation">.</span><span class="token function">Rannor</span><span class="token punctuation">(</span>px<span class="token punctuation">,</span>py<span class="token punctuation">)</span><span class="token punctuation">;</span>
      pz <span class="token operator">=</span> px<span class="token operator">*</span>px <span class="token operator">+</span> py<span class="token operator">*</span>py<span class="token punctuation">;</span>
      random <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">Rndm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      T<span class="token operator">-&gt;</span><span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   T<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li><strong>Size of TTree in the File</strong>
<blockquote>
<ul>
<li>&#x5F53;&#x5C06;&#x4E00;&#x4E2A; tree &#x5199;&#x5165;&#x6587;&#x4EF6;&#x65F6;, &#x5982;&#x679C;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x8D85;&#x8FC7; TTree::GetMaxTreeSize() &#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x503C;&#x65F6;, &#x5219;&#x5173;&#x95ED;&#x5F53;&#x524D;&#x6587;&#x4EF6;, &#x5F00;&#x542F;&#x65B0;&#x7684;&#x6587;&#x4EF6;. &#x5982;&#x679C;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x540D;&#x4E3A; &quot;myfile.root&quot;, &#x65B0;&#x7684;&#x6587;&#x4EF6;&#x4E3A; &quot;myfile_1.root&quot;, &quot;myfile_2.root&quot; &#x7B49;.</li>
<li>&#x6700;&#x5927;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; TTrre::SetMaxTreeSize() &#x8BBE;&#x7F6E;. &#x9ED8;&#x8BA4;&#x7684; fgMaxTreeSize = 100 GB</li>
</ul>
</blockquote>
</li>
</ul>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>